{% extends 'article/userbase.html' %}
{% load static %}
{% block content %}
<style>
    table tr:nth-child(3){
    counter-reset: rowNumber;
    }
    table tr {
    counter-increment: rowNumber;
    }
    table tr td:first-child::before {
    content: counter(rowNumber);
    min-width: 1em;
    margin-right: 0.5em;
    }
</style>
<section class="b-green">
    <div class="container">
        <div class="row text-center">
            <div class="col">
                خلاصه معاینات
            </div>
        </div>
    </div>
</section>
<svg id="wave" style="transform:rotate(180deg); transition: 0.3s" viewBox="0 0 1440 100" version="1.1"
     xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0">
            <stop stop-color="rgba(127, 255, 0, 1)" offset="0%"></stop>
            <stop stop-color="rgba(127, 255, 0, 1)" offset="100%"></stop>
        </linearGradient>
    </defs>
    <path style="transform:translate(0, 0px); opacity:1" fill="url(#sw-gradient-0)"
          d="M0,30L80,38.3C160,47,320,63,480,60C640,57,800,33,960,25C1120,17,1280,23,1440,31.7C1600,40,1760,50,1920,51.7C2080,53,2240,47,2400,50C2560,53,2720,67,2880,61.7C3040,57,3200,33,3360,25C3520,17,3680,23,3840,30C4000,37,4160,43,4320,46.7C4480,50,4640,50,4800,55C4960,60,5120,70,5280,68.3C5440,67,5600,53,5760,53.3C5920,53,6080,67,6240,66.7C6400,67,6560,53,6720,55C6880,57,7040,73,7200,66.7C7360,60,7520,30,7680,28.3C7840,27,8000,53,8160,68.3C8320,83,8480,87,8640,88.3C8800,90,8960,90,9120,76.7C9280,63,9440,37,9600,25C9760,13,9920,17,10080,20C10240,23,10400,27,10560,25C10720,23,10880,17,11040,25C11200,33,11360,57,11440,68.3L11520,80L11520,100L11440,100C11360,100,11200,100,11040,100C10880,100,10720,100,10560,100C10400,100,10240,100,10080,100C9920,100,9760,100,9600,100C9440,100,9280,100,9120,100C8960,100,8800,100,8640,100C8480,100,8320,100,8160,100C8000,100,7840,100,7680,100C7520,100,7360,100,7200,100C7040,100,6880,100,6720,100C6560,100,6400,100,6240,100C6080,100,5920,100,5760,100C5600,100,5440,100,5280,100C5120,100,4960,100,4800,100C4640,100,4480,100,4320,100C4160,100,4000,100,3840,100C3680,100,3520,100,3360,100C3200,100,3040,100,2880,100C2720,100,2560,100,2400,100C2240,100,2080,100,1920,100C1760,100,1600,100,1440,100C1280,100,1120,100,960,100C800,100,640,100,480,100C320,100,160,100,80,100L0,100Z"></path>
</svg>
<section class='container'>
    {% for company in Company %}
    <div class='row text-center'>
        <div class='col'>
            {% csrf_token %}
            <lable>کد شرکت:</lable>
            {{ company.examinations_code }}
        </div>
    </div>
    <div class='row text-center'>
        <div class='col'>
            <lable>پزشک طب کار:دکتر</lable>
            {{ company.doctor }}
        </div>
        <div class='col'>
            <lable>کارخانه/کارگاه/شرکت:</lable>
            {{ company.company }}
        </div>
    </div>
    <div class='row text-center'>
        <div class='col'>
            <lable>کارشناس بهداشت حرفه ای:مهندس</lable>
            {{ company.specialist }}
        </div>
        <div class='col'>
            <lable>تاریخ انجام معاینات:</lable>
            {{ company.date }}
        </div>
    </div>
    {% endfor %}
    <div class='row text-center'>
        <table>   
            <tr>
                <th colspan='3' rowspan='2'>ردیف</th>
                <th colspan='3' rowspan='2'>نام</th>
                <th colspan='3' rowspan='2'>سن</th>
                <th colspan='3' rowspan='2'>شغل</th>
                <th colspan='3' rowspan='2'>عوامل زیان اور</th>
                <th colspan='2'>ادیومتری</th>
                <th colspan='2'>اسپیرومتری</th>
                <th colspan='2'>اپتومتری</th>
                <th colspan='2'>ازمایشات</th>
                <th colspan='1' rowspan='2'>کد بیماری شغلی</th>
                <th colspan='2'>ارجاع به متخصص</th>
                <th colspan='4'>نظر نهایی پزشک</th>
                <th colspan='3'>اقدامات کارشناس</th>
            </tr>
            <tr>
                <th>نرمال</th>
                <th>غیر نرمال</th>
                <th>نرمال</th>
                <th>غیر نرمال</th>
                <th>نرمال</th>
                <th>غیر نرمال</th>
                <th>نرمال</th>
                <th>غیر نرمال</th>
                <th>دارد</th>
                <th>ندارد</th>
                <th>بلامانع</th>
                <th>تغییر شغل</th>
                <th>مشروط</th>
                <th>کمیسیون</th>
                <th>درحال پیگیری</th>
                <th>انجام شده</th>
                <th>انجام نشده</th>
            </tr>
            {% for summary in Summary %}
            <tr>
                {% load django_template_maths %}
                <td colspan='3'></td>
                <td colspan='3'>{{ summary.name }}</td>
                <td colspan='3'>{{ 100|sub:summary.age }}</td>
                <td colspan='3'>{{ summary.job }}</td>
                <td colspan='3'>{{ summary.harmful_factors }}</td>
                {% if summary.left_ear_hearing == 'normal' and summary.right_ear_hearing == 'normal' %}
                    <td>*</td>
                    <td></td>
                {% else %}
                    <td></td>
                    <td>*</td>
                {% endif %}
                {% if summary.breathing_test == 'normal' %}
                    <td>*</td>
                    <td></td>
                {% else %}
                    <td></td>
                    <td>*</td>
                {% endif %}
                {% if summary.color_vision == 'normal' %}
                    <td>*</td>
                    <td></td>
                {% else %}
                    <td></td>
                    <td>*</td>
                {% endif %}
                {% if summary.urine == 'normal' %}
                    <td>*</td>
                    <td></td>
                {% else %}
                    <td></td>
                    <td>*</td>
                {% endif %}
                    <td>{{ summary.code }}</td>
                {% if summary.refer_to_specialist == 'none' %}
                    <td>*</td>
                    <td></td>
                {% else %}
                    <td></td>
                    <td>*</td>
                {% endif %}
                {% if summary.final_theory == 'belamane' %}
                    <td>*</td>
                    <td></td>
                    <td></td>
                    <td></td>
                {% elif summary.final_theory  == 'taghir_shekl' %}
                    <td></td>
                    <td>*</td>
                    <td></td>
                    <td></td>
                {% elif summary.final_theory  == 'mashrot' %}   
                    <td></td>
                    <td></td>
                    <td>*</td>
                    <td></td> 
                {% elif summary.final_theory  == 'comision' %}   
                    <td></td>
                    <td></td>
                    <td>*</td>
                    <td></td> 
                {% else %}
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td> 
                {% endif %}
                {% if summary.occupational_actions == 'darhal_peygiri' %}
                    <td>*</td>
                    <td></td>
                    <td></td>
                {% elif summary.occupational_actions  == 'done' %}
                    <td></td>
                    <td>*</td>
                    <td></td>
                {% else %}
                    <td></td>
                    <td></td>
                    <td>*</td>
                {% endif %}
            </tr>
            
            {% endfor %}
        </table>
    </div>
</section>
{% endblock content %}